---
import { getCollection } from 'astro:content';
import Layout from "@layouts/Layout.astro";
import ProjectCard from '@components/general/ProjectCard.astro';

export async function getStaticPaths() {
  const projectsEntries = await getCollection('projects');
  return projectsEntries.map(entry => ({
    params: { slug: entry.slug }, props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();

console.log("entry", entry.data)
---
<Layout subtitle={entry.data.name}>
  <h2 class="rainbow">{entry.data.title}</h2>

  <div class="mb-8">
    {entry.data.video
      ? <video width="100%" height="100%" controls disablepictureinpicture controlslist="nodownload noplaybackrate">
          <source src=`/assets/videos/${entry.data.name}.mp4` type="video/mp4" />
      </video>
      : <ProjectCard project={entry} link={false} />
    }
  </div>

  <div class="dark:text-light mb-14">
    <Content />
  </div>
</Layout>